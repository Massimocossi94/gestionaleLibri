(function(t){function e(e){for(var o,r,n=e[0],l=e[1],c=e[2],d=0,m=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},i={app:0},s=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"18fd":function(t,e,a){},"43fe":function(t,e,a){"use strict";a("5d3e")},"4be0":function(t,e,a){"use strict";a("d3b4")},"566f":function(t,e,a){"use strict";a("18fd")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("navbar"),a("router-view")],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar is-info",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[t._m(0),a("a",{staticClass:"navbar-burger",class:{"is-active":t.showNav},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},on:{click:function(e){t.showNav=!t.showNav}}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"navbar-menu",class:{"is-active":t.showNav},attrs:{id:"navbarBasicExample"}},[a("div",{staticClass:"navbar-start"},[t.token?a("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t._v(" RICERCA LIBRO ")]):t._e(),t.token?a("router-link",{staticClass:"navbar-item",attrs:{to:"/books"}},[t._v(" I TUOI LIBRI ")]):t._e(),t.token?t._e():a("router-link",{staticClass:"navbar-item",attrs:{to:"/registrazione"}},[t._v(" REGISTRATI ")]),t.token?t._e():a("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[t._v(" ACCEDI ")])],1),a("div",{staticClass:"navbar-end"},[t.token?a("a",{staticClass:"navbar-item logout",attrs:{href:"#"},on:{click:t.signout}},[t._v("LOGOUT")]):t._e()])])]),t.utente?a("div",{staticClass:"notification is-info is-light utente"},[t._v(" CIAO "+t._s(t.utente)+"!!! ")]):t._e()])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a",{staticClass:"navbar-item"},[o("img",{attrs:{src:a("a862"),width:"170",height:"38"}})])}],l=a("1da1"),c=(a("96cf"),a("d3b7"),a("ac1f"),a("5319"),"https://gestionale-libri-backend.herokuapp.com/book"),u="https://gestionale-libri-backend.herokuapp.com/auth",d={name:"Navbar",data:function(){return{showNav:!1,token:null,utente:null}},methods:{signout:function(){localStorage.removeItem("token"),this.token=null,this.$router.go()},getMe:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(u+"/me",{method:"GET",headers:{Authorization:"Bearer "+t.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:o=e.sent,"Non Autorizzato!!!"!==o.message?t.utente=o.user.toUpperCase():(localStorage.removeItem("token"),t.$router.replace("/login"));case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.token=localStorage.getItem("token"),this.getMe()}},m=d,v=(a("7d5d"),a("2877")),p=Object(v["a"])(m,r,n,!1,null,"f0c7b086",null),b=p.exports,g={components:{Navbar:b},name:"App"},f=g,C=(a("034f"),Object(v["a"])(f,i,s,!1,null,null,null)),h=C.exports,k=a("8c4f"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"columns search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"input column is-11",attrs:{type:"text",placeholder:"Fai la tua ricerca (autore, titolo, etc.)"},domProps:{value:t.query},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getBooks()},input:function(e){e.target.composing||(t.query=e.target.value)}}}),a("button",{staticClass:"button is-primary is-1",on:{click:function(e){return t.getBooks()}}},[t._v("Cerca")])]),a("section",{staticClass:"section"},[a("div",{staticClass:"columns is-multiline"},t._l(t.books,(function(e){return a("div",{key:e.id,staticClass:"column is-6"},[a("book",{attrs:{book:e},on:{addBook:function(e){return t.onAddBook(e)}}})],1)})),0),a("div",{staticClass:"modal",class:{"is-active":t.confermaModal}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("section",{staticClass:"modal-card-body",class:{conferma:t.libroSuccesso,presente:t.libroGiaPresente}},[a("h1",{staticClass:"presenzaLibro"},[t._v(t._s(t.libroPresente))]),a("button",{staticClass:"button okbutton",on:{click:function(e){t.confermaModal=!1}}},[a("p",{staticClass:"subtitle"},[t._v("OK")])])])])])])])},w=[],x=(a("25f0"),a("a4d3"),a("e01a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.book?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"media"},[t.book.volumeInfo.imageLinks?a("div",{staticClass:"media-left"},[a("figure",{staticClass:"image is-68x68"},[a("img",{attrs:{src:t.book.volumeInfo.imageLinks.thumbnail,alt:t.book.volumeInfo.title}})])]):t._e(),a("div",{staticClass:"media-content"},[a("p",{staticClass:"title is-6"},[t._v(t._s(t.book.volumeInfo.title))]),t.book.volumeInfo.authors?a("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.getAuthors(t.book.volumeInfo.authors)))]):t._e()])]),a("div",{staticClass:"content"},[t._v(" Editore: "+t._s(t.book.volumeInfo.publisher)),a("br"),t._v(" Pubblicato il "+t._s(new Date(t.book.volumeInfo.publishedDate).toLocaleDateString())),a("br"),t._v(" ISBN: "+t._s(t.getISBN(t.book.volumeInfo.industryIdentifiers))),a("br")]),a("div",{staticClass:"cardButton"},[a("button",{staticClass:"button is-primary is-info",on:{click:function(e){t.tramaModal=!0}}},[t._v("Trama")]),a("button",{staticClass:"button is-primary is-focused",on:{click:function(e){t.aggiungiModal=!0}}},[t._v("Aggiungi")])]),a("div",{staticClass:"modal",class:{"is-active":t.tramaModal}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Trama")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.tramaModal=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"title is-6"},[t._v(t._s(t.book.volumeInfo.title))]),a("span",[t._v(t._s(t.getTrama(t.book)))])])])])]),a("div",{staticClass:"modal",class:{"is-active":t.aggiungiModal}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("In quale formato hai il libro?")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.aggiungiModal=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Seleziona tipologia")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{on:{change:t.onTipologiaChange}},[a("option",[t._v("Seleziona tipologia")]),a("option",{attrs:{value:"Cartaceo"}},[t._v("Cartaceo")]),a("option",{attrs:{value:"Ebook"}},[t._v("Ebook")]),a("option",{attrs:{value:"AudioLibro"}},[t._v("Audio libro")])])])])])]),a("footer",{staticClass:"modal-card-foot formatButtons"},[a("button",{staticClass:"button",on:{click:function(e){t.aggiungiModal=!1}}},[t._v("Chiudi")]),a("button",{staticClass:"button is-primary",attrs:{disabled:""===t.tipologiaLibro},on:{click:t.addBook}},[t._v("Aggiungi Libro")])])])])]):t._e()}),y=[],E=(a("a15b"),a("7db0"),{name:"Book",props:{book:Object},data:function(){return{tramaModal:!1,aggiungiModal:!1,tipologiaLibro:""}},methods:{onTipologiaChange:function(t){this.tipologiaLibro=t.target.value},getAuthors:function(t){return t.join(", ")},getISBN:function(t){var e=t.find((function(t){return"ISBN_13"===t.type}));return e?e.identifier:"Non trovato"},getTrama:function(t){var e="Trama non disponibile";return t.volumeInfo.description&&(e=t.volumeInfo.description),e},addBook:function(){this.$emit("addBook",{book:this.book,tipologia:this.tipologiaLibro}),this.aggiungiModal=!1}}}),S=E,P=(a("566f"),Object(v["a"])(S,x,y,!1,null,"6a3d7f69",null)),I=P.exports,O={components:{Book:I},name:"App",mounted:function(){localStorage.getItem("token")||this.$router.push("/login")},created:function(){},data:function(){return{books:[],query:"",tramaModal:!1,aggiungiModal:!1,tipologiaLibro:"",confermaModal:!1,libroPresente:"",libroGiaPresente:!1,libroSuccesso:!1,token:localStorage.getItem("token")}},methods:{onAddBook:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o,i,s,r,n,l,u,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.book,i=t.tipologia,s={titolo:o.volumeInfo.title,autori:o.volumeInfo.authors.toString(),trama:o.volumeInfo.description,thumbnail:o.volumeInfo.imageLinks.thumbnail,dataPubblicazione:o.volumeInfo.publishedDate,editore:o.volumeInfo.publisher,isbn:o.volumeInfo.industryIdentifiers[0].identifier,tipologia:i},r=!0,a.next=5,fetch(c+"/user/me",{method:"GET",headers:{Authorization:"Bearer "+e.token}});case 5:return n=a.sent,a.next=8,n.json();case 8:if(l=a.sent,console.log(l.message),"Non Autorizzato!!!"!==l.message)for(u=0;u<l.book.length;u++)l.book[u].titolo===s.titolo&&(e.confermaModal=!0,e.libroGiaPresente=!0,e.libroSuccesso=!1,e.libroPresente="Libro già presente in libreria",r=!1);else alert("SESSIONE SCADUTA"),localStorage.removeItem("token"),e.$router.replace("/login");if(!r){a.next=23;break}return a.next=14,fetch(c,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e.token},body:JSON.stringify(s)});case 14:return d=a.sent,a.next=17,d.json();case 17:m=a.sent,console.log(m.messages),e.confermaModal=!0,e.libroSuccesso=!0,e.libroGiaPresente=!1,e.libroPresente="Libro aggiunto in libreria con successo";case 23:case"end":return a.stop()}}),a)})))()},getBooks:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q="+t.query);case 3:return a=e.sent,e.next=6,a.json();case 6:o=e.sent,t.books=o.items,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log("errore: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},T=O,A=(a("4be0"),Object(v["a"])(T,_,w,!1,null,null,null)),M=A.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal",class:{"is-active":t.aggiungiModale}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Aggiungi Libro")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.aggiungiModale=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Titolo")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.titolo,expression:"titolo"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.titolo},on:{input:function(e){e.target.composing||(t.titolo=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Autore/i")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.autori,expression:"autori"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.autori},on:{input:function(e){e.target.composing||(t.autori=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Editore")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editore,expression:"editore"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.editore},on:{input:function(e){e.target.composing||(t.editore=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("ISBN")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isbn,expression:"isbn"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.isbn},on:{input:function(e){e.target.composing||(t.isbn=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Trama")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.trama,expression:"trama"}],staticClass:"textarea",domProps:{value:t.trama},on:{input:function(e){e.target.composing||(t.trama=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Copertina")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.thumbnail,expression:"thumbnail"}],staticClass:"input",attrs:{placeholder:"Incolla indirizzo immagine",type:"text"},domProps:{value:t.thumbnail},on:{input:function(e){e.target.composing||(t.thumbnail=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Data di pubblicazione")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataPubblicazione,expression:"dataPubblicazione"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.dataPubblicazione},on:{input:function(e){e.target.composing||(t.dataPubblicazione=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Seleziona tipologia")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{on:{change:t.onTipologiaChange}},[a("option",[t._v("Seleziona tipologia")]),a("option",{attrs:{value:"Cartaceo"}},[t._v("Cartaceo")]),a("option",{attrs:{value:"Ebook"}},[t._v("Ebook")]),a("option",{attrs:{value:"AudioLibro"}},[t._v("Audio libro")])])])])]),a("button",{staticClass:"button is-info",attrs:{disabled:""===t.tipologia},on:{click:t.createBook}},[t._v("Salva")])])])]),a("section",{staticClass:"section"},[a("label",{staticClass:"label"},[t._v("Aggiungi Libro che non trovi nella ricerca")]),a("button",{staticClass:"button is-primary",on:{click:function(e){t.aggiungiModale=!0}}},[t._v("Aggiungi")]),a("div",{staticClass:"field Ricerca"},[a("label",{staticClass:"label"},[t._v("Ricerca per Autore")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ricercaAutore,expression:"ricercaAutore"}],staticClass:"input",attrs:{type:"text",placeholder:"es. Donato Carrisi"},domProps:{value:t.ricercaAutore},on:{input:function(e){e.target.composing||(t.ricercaAutore=e.target.value)}}})]),a("label",{staticClass:"label"},[t._v("Ricerca per Titolo")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ricercaTitolo,expression:"ricercaTitolo"}],staticClass:"input",attrs:{type:"text",placeholder:"es. La ragazza nella nebbia"},domProps:{value:t.ricercaTitolo},on:{input:function(e){e.target.composing||(t.ricercaTitolo=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Filtra per tipologia")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{on:{change:t.onOptionChange}},[a("option",{attrs:{value:"All"}},[t._v("Tutti")]),t._l(t.options,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2)])])]),a("div",{staticClass:"modal",class:{"is-active":t.confermaModal}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("section",{staticClass:"modal-card-body",class:{conferma:t.libroSuccesso,presente:t.libroGiaPresente}},[a("h1",{staticClass:"presenzaLibro"},[t._v(t._s(t.libroPresente))]),a("button",{staticClass:"button okbutton",on:{click:function(e){t.confermaModal=!1}}},[a("p",{staticClass:"subtitle"},[t._v("OK")])])])])]),t.libriFiltrati.length>0?a("div",{staticClass:"columns is-multiline"},t._l(t.libriFiltrati,(function(e){return a("div",{key:e.id,staticClass:"column is-6"},[a("my-book",{attrs:{book:e},on:{deleteBook:function(e){return t.onDeleteBook(e)},updateBook:function(e){return t.onUpdateBook(e)}}})],1)})),0):a("h2",{staticClass:"title is-2"},[t._v("Nessun libro trovato.")])])])},N=[],j=(a("159b"),a("4de4"),a("caad"),a("2532"),a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.book?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"media"},[t.book.thumbnail?a("div",{staticClass:"media-left"},[a("figure",{staticClass:"image is-128x128"},[a("img",{staticClass:"immagine",attrs:{src:t.book.thumbnail,alt:t.book.titolo}})])]):t._e(),a("div",{staticClass:"media-content"},[a("p",{staticClass:"title is-6"},[t._v(t._s(t.book.titolo))]),t.book.autori?a("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.book.autori))]):t._e(),a("button",{staticClass:"button is-small is-info is-outlined",on:{click:function(e){t.tramaModalLibrary=!0}}},[t._v("Trama")])])]),a("div",{staticClass:"content"},[a("strong",[t._v("Editore:")]),t._v(" "+t._s(t.book.editore)),a("br"),a("strong",[t._v("Pubblicato il")]),t._v(" "+t._s(new Date(t.book.dataPubblicazione).toLocaleDateString())),a("br"),a("strong",[t._v("ISBN:")]),t._v(" "+t._s(t.book.isbn)),a("br"),a("strong",[t._v("Formato:")]),t._v(" "+t._s(t.book.tipologia)),a("br")]),a("div",{staticClass:"cardButton"},[a("button",{staticClass:"button is-primary is-info",on:{click:function(e){t.modificaModale=!0}}},[t._v("Modifica")]),a("button",{staticClass:"button is-primary is-focused",on:{click:function(e){t.confermaDelete=!0}}},[t._v("Elimina")])]),a("div",{staticClass:"modal",class:{"is-active":t.tramaModalLibrary}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Trama")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.tramaModalLibrary=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"title is-6"},[t._v(t._s(t.book.titolo))]),a("span",[t._v(t._s(t.getTrama(t.book)))])])])]),a("div",{staticClass:"modal",class:{"is-active":t.modificaModale}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Modifica")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){t.modificaModale=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Titolo")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.titolo,expression:"book.titolo"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.book.titolo},on:{input:function(e){e.target.composing||t.$set(t.book,"titolo",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Autore/i")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.autori,expression:"book.autori"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.book.autori},on:{input:function(e){e.target.composing||t.$set(t.book,"autori",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Editore")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.editore,expression:"book.editore"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.book.editore},on:{input:function(e){e.target.composing||t.$set(t.book,"editore",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("ISBN")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.isbn,expression:"book.isbn"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.book.isbn},on:{input:function(e){e.target.composing||t.$set(t.book,"isbn",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Trama")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.trama,expression:"book.trama"}],staticClass:"textarea",domProps:{value:t.book.trama},on:{input:function(e){e.target.composing||t.$set(t.book,"trama",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Copertina")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.book.thumbnail,expression:"book.thumbnail"}],staticClass:"input",attrs:{placeholder:"Incolla indirizzo immagine",type:"text"},domProps:{value:t.book.thumbnail},on:{input:function(e){e.target.composing||t.$set(t.book,"thumbnail",e.target.value)}}})])]),a("button",{staticClass:"button is-info",on:{click:t.updateBook}},[t._v("Salva")])])])]),a("div",{staticClass:"modal",class:{"is-active":t.confermaDelete}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("section",{staticClass:"modal-card-body deleteModal"},[a("h1",{staticClass:"eliminaLibro"},[t._v("Sei sicuro/a di voler eliminare il libro?")]),a("div",{staticClass:"deleteButton"},[a("button",{staticClass:"button is-danger",on:{click:function(e){t.confermaDelete=!1}}},[t._v("ANNULLA")]),a("button",{staticClass:"button is-success",on:{click:function(e){t.deleteBook(),t.confermaDelete=!1}}},[t._v("CONFERMA")])])])])])])]):t._e()}),L=[],z={props:{book:[]},data:function(){return{tramaModalLibrary:!1,confermaDelete:!1,modificaModale:!1}},methods:{deleteBook:function(){this.$emit("deleteBook",this.book)},getTrama:function(t){var e="Trama non disponibile";return t.trama&&(e=t.trama),e},updateBook:function(){this.$emit("updateBook",this.book),this.modificaModale=!1}}},$=z,R=(a("be64"),Object(v["a"])($,j,L,!1,null,null,null)),D=R.exports,G={components:{MyBook:D},name:"Libreria",mounted:function(){localStorage.getItem("token")||this.$router.push("/login")},data:function(){return{books:[],options:[{value:"Ebook",label:"EBook"},{value:"Cartaceo",label:"Cartaceo"},{value:"AudioLibro",label:"Audio libro"}],optionSelected:null,ricercaAutore:"",ricercaTitolo:"",token:localStorage.getItem("token"),aggiungiModale:!1,titolo:null,autori:null,trama:null,thumbnail:null,dataPubblicazione:null,editore:null,isbn:null,tipologia:null,confermaModal:!1,libroPresente:"",libroGiaPresente:!1,libroSuccesso:!1}},created:function(){this.getbooks()},computed:{libriFiltrati:function(){var t=this,e=[];return null!==this.optionSelected&&"All"!==this.optionSelected?this.books.forEach((function(a){a.tipologia===t.optionSelected&&e.push(a)})):e=this.books,""!==this.ricercaAutore&&(e=e.filter((function(e){return e.autori.toLowerCase().includes(t.ricercaAutore.toLowerCase())}))),""!==this.ricercaTitolo&&(e=e.filter((function(e){return e.titolo.toLowerCase().includes(t.ricercaTitolo.toLowerCase())}))),e.sort((function(t,e){var a=t.titolo.toUpperCase(),o=e.titolo.toUpperCase();return a<o?-1:a>o?1:0}))}},methods:{onTipologiaChange:function(t){this.tipologia=t.target.value},onOptionChange:function(t){this.optionSelected=t.target.value},getbooks:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(c+"/user/me",{method:"GET",headers:{Authorization:"Bearer "+t.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:o=e.sent,"Non Autorizzato!!!"!==o.message?t.books=o.book:(alert("SESSIONE SCADUTA"),localStorage.removeItem("token"),t.$router.replace("/login")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log("errore: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},onUpdateBook:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(c+"/"+t.id,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token},body:JSON.stringify(t)});case 3:return o=a.sent,a.next=6,o.json();case 6:e.getbooks(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log("errore: ",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},onDeleteBook:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(c+"/"+t.id,{method:"DELETE",headers:{Authorization:"Bearer "+e.token}});case 3:return o=a.sent,a.next=6,o.json();case 6:e.getbooks(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log("errore: ",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},createBook:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,o,i,s,r,n,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={titolo:t.titolo,autori:t.autori,trama:t.trama,thumbnail:t.thumbnail,dataPubblicazione:t.dataPubblicazione,editore:t.editore,isbn:t.isbn,tipologia:t.tipologia},o=!0,e.next=4,fetch(c+"/user/me",{method:"GET",headers:{Authorization:"Bearer "+t.token}});case 4:return i=e.sent,e.next=7,i.json();case 7:for(s=e.sent,r=0;r<s.book.length;r++)s.book[r].titolo===a.titolo&&(t.confermaModal=!0,t.libroGiaPresente=!0,t.libroSuccesso=!1,t.libroPresente="Libro già presente in libreria",o=!1);if(!o){e.next=17;break}return e.next=12,fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token},body:JSON.stringify(a)});case 12:return n=e.sent,e.next=15,n.json();case 15:if(l=e.sent,"Success Operation"!==l.messages)for(u=0;u<Object.keys(l.error).length;u++)"Titolo Maggiore di 3 caratteri"==l.error[u].msg&&(t.confermaModal=!0,t.libroGiaPresente=!0,t.libroSuccesso=!1,t.libroPresente="Titolo obbligatorio"),"tipologia non vuota"==l.error[u].msg&&(t.confermaModal=!0,t.libroGiaPresente=!0,t.libroSuccesso=!1,t.libroPresente="Scegliere tipologia");else t.confermaModal=!0,t.libroSuccesso=!0,t.libroGiaPresente=!1,t.libroPresente="Libro aggiunto in libreria con successo",t.aggiungiModale=!1,t.getbooks();case 17:case"end":return e.stop()}}),e)})))()}}},U=G,q=(a("43fe"),Object(v["a"])(U,B,N,!1,null,null,null)),F=q.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"section"},[t.validationErrors.length?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[t.validationErrors.length?a("div",{staticClass:"notification is-danger is-light"},[a("button",{staticClass:"delete",on:{click:function(e){return t.resetError()}}}),a("div",{staticClass:"content"},[t._v(" Risolvi i seguenti errori prima di procedere: "),a("ul",{staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},t._l(t.validationErrors,(function(e,o){return a("li",{key:"error-"+o,domProps:{innerHTML:t._s(e)}})})),0)])]):t._e()])]):t._e(),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"username",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._m(1)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(2)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirm,expression:"passwordConfirm"}],staticClass:"input",attrs:{type:"password",placeholder:"Conferma Password"},domProps:{value:t.passwordConfirm},on:{input:function(e){e.target.composing||(t.passwordConfirm=e.target.value)}}}),t._m(3)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",on:{click:t.signup}},[t._v(" REGISTRATI ")])])]),t._m(4)])])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Se sei già registrato effettua "),a("a",{attrs:{href:"/login"}},[t._v("qui")]),t._v(" l'accesso")])}],K={name:"Signup",data:function(){return{email:null,username:null,password:null,passwordConfirm:null,validationErrors:[]}},methods:{resetError:function(){this.validationErrors=[]},signup:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o,i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.resetError(),t.preventDefault(),e.password!==e.passwordConfirm){a.next=15;break}return o={email:e.email,username:e.username,password:e.password},a.next=7,fetch(u+"/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});case 7:return i=a.sent,a.next=10,i.json();case 10:if(s=a.sent,"Success Operation"===s.messages&&e.$router.replace("/login"),"Errore input"===s.message)for(r=0;r<Object.keys(s.error).length;r++)"Inserire email valida"==s.error[r].msg&&e.validationErrors.push("Inserire <strong>E-mail</strong> valida"),"Password almeno di 8 caratteri"==s.error[r].msg&&e.validationErrors.push("Inserire <strong>Password</strong> di almeno 8 caratteri"),"Email già esistente!!!"==s.error[r].msg&&e.validationErrors.push("<strong>E-mail</strong> già esistente"),"Inserisci Username"==s.error[r].msg&&e.validationErrors.push("Inserire <strong>Username</strong>"),"Username già esistente!!!"==s.error[r].msg&&e.validationErrors.push("<strong>Username</strong> già esistente");a.next=16;break;case 15:e.validationErrors.push("le <strong>Password</strong> non corrispondono!!!");case 16:a.next=21;break;case 18:a.prev=18,a.t0=a["catch"](0),console.log("errore: ",a.t0);case 21:case"end":return a.stop()}}),a,null,[[0,18]])})))()}}},Q=K,V=Object(v["a"])(Q,J,H,!1,null,null,null),W=V.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"section"},[t.validationErrors.length?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[t.validationErrors.length?a("div",{staticClass:"notification is-danger is-light"},[a("button",{staticClass:"delete",on:{click:function(e){return t.resetError()}}}),a("div",{staticClass:"content"},[t._v(" Risolvi i seguenti errori prima di procedere: "),a("ul",{staticStyle:{"margin-top":"0.3em","margin-left":"1em"}},t._l(t.validationErrors,(function(e,o){return a("li",{key:"error-"+o,domProps:{innerHTML:t._s(e)}})})),0)])]):t._e()])]):t._e(),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left has-icons-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(1)])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",on:{click:t.signin}},[t._v(" ACCEDI ")])]),t._m(2)])])])},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-lock"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Se non sei ancora registrato crea il tuo profilo "),a("a",{attrs:{href:"/registrazione"}},[t._v("qui")])])}],Z={name:"Signin",data:function(){return{email:null,password:null,validationErrors:[]}},methods:{resetError:function(){this.validationErrors=[]},signin:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o,i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.resetError(),t.preventDefault(),o={email:e.email,password:e.password},a.next=5,fetch(u+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 5:return i=a.sent,a.next=8,i.json();case 8:if(s=a.sent,"Sei Loggato"===s.messages&&(localStorage.setItem("token",s.token),e.$router.replace("/"),window.location.reload()),"Email errata!!!"===s.message&&e.validationErrors.push("<strong>E-mail</strong> errata"),"Password errata"===s.message&&e.validationErrors.push("<strong>Password</strong> errata"),"Errore input"===s.message)for(r=0;r<Object.keys(s.error).length;r++)"Inserire email valida"==s.error[r].msg&&e.validationErrors.push("Inserire <strong>E-mail</strong> valida"),"Password almeno di 8 caratteri"==s.error[r].msg&&e.validationErrors.push("Inserire <strong>Password</strong> di almeno 8 caratteri");case 13:case"end":return a.stop()}}),a)})))()}}},tt=Z,et=Object(v["a"])(tt,X,Y,!1,null,null,null),at=et.exports;o["a"].use(k["a"]);var ot=[{path:"/",component:M},{path:"/books",component:F},{path:"/registrazione",component:W},{path:"/login",component:at}],it=new k["a"]({mode:"history",routes:ot});o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(h)},router:it}).$mount("#app")},"5c72":function(t,e,a){},"5d3e":function(t,e,a){},"7d5d":function(t,e,a){"use strict";a("ce47")},"85ec":function(t,e,a){},a862:function(t,e,a){t.exports=a.p+"img/HOME'S BOOKS2.06b87399.png"},be64:function(t,e,a){"use strict";a("5c72")},ce47:function(t,e,a){},d3b4:function(t,e,a){}});
//# sourceMappingURL=app.7ec36884.js.map